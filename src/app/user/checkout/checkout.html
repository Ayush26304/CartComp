<app-navbar *ngIf="showNavbar"></app-navbar>

<div class="checkout-container">
  <h2 class="checkout-title">Checkout</h2>
 
  <div class="checkout-grid">
    <!-- Delivery Address -->
    <div class="checkout-section">
      <h3>Delivery Address</h3>
      <form #addressForm="ngForm">
        <input type="text" name="name" placeholder="Full Name" ngModel required />
        <input type="text" name="address" placeholder="Address" ngModel required />
        <input type="text" name="city" placeholder="City" ngModel required />
        <input type="text" name="pincode" placeholder="Pincode" ngModel required />
        <input type="text" name="phone" placeholder="Phone Number" ngModel required />
      </form>
    </div>
 
    <!-- Payment Method -->
    <div class="checkout-section">
      <h3>Payment Method</h3>
      <label><input type="radio" name="payment" value="cod" checked /> Cash on Delivery</label>
      <label><input type="radio" name="payment" value="card" /> Credit/Debit Card</label>
      <label><input type="radio" name="payment" value="upi" /> UPI (Google Pay, PhonePe)</label>
    </div>
 
    <!-- Order Summary -->
    <div class="checkout-summary">
      <h3>Order Summary</h3>
      <div class="summary-item" *ngFor="let item of cartItems">
        <p>{{ item.title }} (x{{ item.quantity }})</p>
        <p>₹{{ item.price * item.quantity }}</p>
      </div>
      <hr />
      <p class="total"><strong>Total:</strong> ₹{{ totalPrice }}</p>
      <button 
        class="place-order-btn" 
        (click)="placeOrder()" 
        [disabled]="isProcessing || cartItems.length === 0">
        <span *ngIf="isProcessing">Processing Order...</span>
        <span *ngIf="!isProcessing">Place Your Order</span>
      </button>
    </div>
  </div>
 
  <!-- Success Popup -->
  <div class="success-popup" *ngIf="showSuccess">
    <div class="popup-content">
      <div class="checkmark">
        <div class="checkmark-circle"></div>
        <div class="checkmark-stem"></div>
        <div class="checkmark-kick"></div>
      </div>
      <h3>Order Placed Successfully!</h3>
      <div *ngIf="placedOrder">
        <p><strong>Order ID:</strong> #{{placedOrder.orderId}}</p>
        <p><strong>Invoice:</strong> {{placedOrder.invoiceNumber}}</p>
        <p><strong>Total:</strong> ₹{{placedOrder.totalAmount}}</p>
      </div>
      <p>Thank you for shopping with us ❤️</p>
      <div class="popup-actions">
        <button (click)="viewOrderTracking()" class="track-btn">Track Order</button>
        <button (click)="closePopup()" class="continue-btn">View Orders</button>
      </div>
    </div>
  </div>
</div>