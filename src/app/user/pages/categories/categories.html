<app-navbar *ngIf="showNavbar"></app-navbar>
<div class="categories-container">
  <!-- Header Section -->
  <div class="header-section" *ngIf="showNavbar">
    <h1>Browse Categories</h1>
    <p>Discover products across all our categories</p>
  </div>
 
  <!-- Loading Spinner -->
  <div *ngIf="loading" class="loading-container">
    <div class="spinner"></div>
    <p>Loading...</p>
  </div>

  <!-- Category Navigation -->
  <div *ngIf="!loading && categories.length" class="categories-nav">
    <h3>Shop by Category</h3>
    <ul class="categories-list">
      <li
        *ngFor="let category of categories"
        (click)="loadProducts(category)"
        [class.active]="category.id === selectedCategory?.id"
      >
        {{ category.name }}
      </li>
    </ul>
  </div>
 
  <!-- Product Section -->
  <div *ngIf="selectedCategory && !loading" class="products-section">
    <div class="section-header">
      <h2>{{ selectedCategory.name }}</h2>
      <span class="product-count">{{ products.length }} products available</span>
    </div>
 
    <!-- No Products Message -->
    <div *ngIf="!products.length" class="no-products">
      <div class="empty-state">
        <h3>No products found</h3>
        <p>This category doesn't have any products yet.</p>
      </div>
    </div>

    <!-- Products Grid -->
    <div *ngIf="products.length" class="products-grid">
      <div
        class="product-card"
        *ngFor="let product of products"
        (click)="openProduct(product.id)"
      >
        <div class="image-wrapper">
          <img [src]="product.imageUrl || 'https://via.placeholder.com/300x300?text=No+Image'" alt="{{ product.name }}" />
        </div>
        <div class="product-info">
          <h4 class="title">{{ product.name }}</h4>
          <p class="price">₹{{ product.price | number:'1.2-2' }}</p>
          <button
            (click)="addToCart(product); $event.stopPropagation()"
            class="btn"
          >
            Add to Cart
          </button>
          <span
            class="heart"
            [class.active]="product.isFavorite"
            (click)="toggleFavorite(product); $event.stopPropagation()"
          >
            ♥
          </span>
        </div>
      </div>
    </div>
  </div>

  <!-- Empty Categories Message -->
  <div *ngIf="!loading && !categories.length" class="no-categories">
    <div class="empty-state">
      <h3>No categories available</h3>
      <p>Categories will appear here once they are added.</p>
    </div>
  </div>
</div>

<app-footer *ngIf="showNavbar"></app-footer>

